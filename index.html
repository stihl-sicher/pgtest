<!DOCTYPE html>
<html>
	<head>
		<TITLE>PHONEGAP TEST	</TITLE>
	<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
	<meta name = "viewport" content = "width = device-width, initial-scale = 1.0, maximum-scale=1, user-scalable=0" />
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
	<script src="cordova.js"></script>
	<style type="text/css">
			.inAppBrowserWrap {
  background-color: rgba(0,0,0,0.75);
  color: rgba(235,235,235,1.0);
  margin-top:50px;
}
.inAppBrowserWrap menu {
  overflow: auto;
  list-style-type: none;
  padding-left: 0;
}
.inAppBrowserWrap menu li {
  font-size: 25px;
  height: 25px;
  float: left;
  margin: 0 10px;
  padding: 3px 10px;
  text-decoration: none;
  color: #ccc;
  display: block;
  background: rgba(30,30,30,0.50);
}
.inAppBrowserWrap menu li.disabled {
    color: #777;
}

	</style>

	</HEAD>
	<BODY>


	<script type="text/javascript">

            if (typeof String.prototype.startsWith != 'function') {
                String.prototype.startsWith = function (str){
                    return this.slice(0, str.length) == str;
                };
            }

            var iabRef = null;

var SQLite = window.cordova.require('cordova-sqlite-plugin.SQLite');

var sqlite = new SQLite('example');

sqlite.open(function(err) {
  if (err) throw err;
  sqlite.query('SELECT ? + ? AS solution', [2, 3], function(err, res) {
    if (err) throw err;
    console.log(res.rows[0].solution);
  });
});            
            function launchUrl() {
                try {
                    var url = document.getElementById("windowUrl").value;
                    var target = getWindowName();
                    var showLocationbar = document.getElementById("windowOptions").checked;

                    if (!url.startsWith('http://') && !url.startsWith('https://')) {
                        url = 'http://' + url;
                    }

                    iabRef = cordova.InAppBrowser.open('http://www.heise.de', '_blank', 'location=yes');
                  //  iabRef.addEventListener('loadstart', onLoadStart);
                  //  iabRef.addEventListener('loadstop', onLoadStop);
                    iabRef.addEventListener('exit', onExit);

                } catch (e) {
                    alert(e);
                }
            }

            function getWindowName()
            {
                var radioButtons = document.getElementsByName("windowName");
                for (var i = 0; i < radioButtons.length; ++i) {
                    if (radioButtons[i].checked) {
                        return radioButtons[i].value;
                    }
                }
            }

            function checkUrlLength() {
                var txt = document.getElementById("windowUrl");
                var btn = document.getElementById("launchButton");

                btn.disabled = (txt.value.length == 0);
            }

            function onLoadStart(event) {
                alert(event.type + ' - ' + event.url);
            }

            function onLoadStop(event) {
                alert(event.type + ' - ' + event.url);
            }

            function onExit(event) {
                alert(event.type);
                if (iabRef) {
                  //  iabRef.removeEventListener('loadstart', onLoadStart);
                  //  iabRef.removeEventListener('loadstop', onLoadStop);
                    iabRef.removeEventListener('exit', onExit);
                    iabRef = null;
                }
            }

        </script>
        <div style="margin-left:10px">
            <div style="margin-top:20px">
                <input type="radio" name="windowName" value="_self" />_self
                <input type="radio" name="windowName" value="_blank" checked="checked" />_blank
                <input type="radio" name="windowName" value="_system">_system
            </div>
            <div>
                <input type="checkbox" id="windowOptions"/>Show location bar?
            </div>
            <div>
                <input id="windowUrl" placeholder="Enter a url" onkeyup="checkUrlLength()" style="width:80%" type="text" id="windowUrl" value="www.google.com"/>
            </div>
            <button id="launchButton" onclick="launchUrl()">Launch InAppBrowser</button>

            <a style="font-size:2rem;" href="http://www.brownys-mantrailer.de" target="_blank">TestLink</a>
        </div>

	</BODY>
	</HTML>
